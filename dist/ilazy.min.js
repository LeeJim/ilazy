!function(t,o){"function"==typeof define&&define.amd?define(function(){return o(t)}):"object"==typeof exports?module.exports=o:t.ilazy=o(t)}(this,function(t,o){var e,n,a,d={};o=o||function(){};var u=function(t,e){if(null==t||1!==t.nodeType)return!1;var n=t.getBoundingClientRect();return o("target elem top: %d, bottom: %d",n.top,n.bottom),n.bottom>=e.top&&n.top<=e.bottom};return d.autoLoad=function(){var t=document.querySelectorAll("[data-ilazy], [data-ilazy-background]"),e=t.length,a=null;0===e&&d.unload();for(var r=0;r<e;r++)if(a=t[r],u(a,n)){o("elem %s is in view",a);var l=a.getAttribute("src"),i=a.getAttribute("data-ilazy"),c=a.getAttribute("data-ilazy-background");null==l||l!==i?a.src=i:null!=c&&(a.style.backgroundImage="url("+c+");")}},d.init=function(o){e=(o=o||{}).offset||30,a=o.container?document.querySelector(o.container):t,n={top:0,bottom:(t.innerHeight||document.documentElement.clientHeight)+e},document.addEventListener?(a.addEventListener("scroll",d.autoLoad,!1),t.addEventListener("load",d.autoLoad,!1)):document.attachEvent?(a.attachEvent("onScroll",d.autoLoad,!1),t.attachEvent("onLoad",d.autoLoad,!1)):(a.onScroll=d.autoLoad,t.onLoad=d.autoLoad)},d.unload=function(){document.removeEventListener?(a.removeEventListener("scroll",d.autoLoad,!1),t.removeEventListener("load",d.autoLoad,!1)):document.distachEvent?(a.distachEvent("onScroll",d.autoLoad,!1),t.distachEvent("onLoad",d.autoLoad,!1)):(a.onScroll=null,t.onLoad=null)},d});